//=============================================================================
//                      Hypercom Inc
//                      (c) Copyright 2002
//=============================================================================
//
// Module overview:             V2tab.c
//      Visa 2 Table routines
//
//=============================================================================
#include "string.h"

#include "basictyp.h"
#include "sdk.h"
#include "sdkos.h"
#include "sdkio.h"

#include "defines.h"
#include "struct.h"
#include "comdata.h"
#include "utllib.h"

#include "V2tab.h"
#ifdef MAKE_OPTIMUM
#include "persistence.h"
#endif

//=============================================================================
// External variables / declarations
//=============================================================================


//=============================================================================
// Private defines and typedefs
//=============================================================================


//=============================================================================
// Private function declarations
//=============================================================================


//=============================================================================
// Public data definitions
//=============================================================================


//=============================================================================
// Private data definitions
//=============================================================================


//=============================================================================
// Public function definitions
//=============================================================================

//-----------------------------------------------------------------------------
//! \brief
//!     Sets the Checksum (LRC) for the Visa2 Table
//!
//! \return
//!     None
//-----------------------------------------------------------------------------
void SetV2TabLRC( void )
{
	V2LRC = CalcLrc( ( UBYTE * ) & V2TAB, V2SZE * V2MAX );
#ifdef MAKE_OPTIMUM
	StoreTable( (UBYTE *)&V2TAB );
#endif
}

//-----------------------------------------------------------------------------
//! \brief
//!     Finds for Visa 2 Table by the given acquirer ID
//!
//! \param
//!		[in]acq_id			acquirer id to match
//!
//! \return
//!     Visa2 table pointer or NULL if does not exist
//-----------------------------------------------------------------------------
struct v2_rec *FindVisa2( UBYTE acq_id )
{
	UBYTE i;

	for ( i = 0; i < V2MAX; i++ )
	{
		if ( V2TAB[i].V2AQID == acq_id )
		{
			return ( struct v2_rec * ) &V2TAB[i];
		}
	}
	return ( ( struct v2_rec * ) NULL );
}


//=============================================================================
// Private function definitions
//=============================================================================

